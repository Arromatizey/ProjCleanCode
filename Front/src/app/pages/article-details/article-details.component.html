<!-- src/app/pages/article-details/article-details.component.html -->
<div class="container mx-auto p-4">
  <!-- Affichage de l'article -->
  <!-- Affichage de l'article -->
  <div class="bg-white p-4 rounded-md shadow-md mb-6">
    <div *ngIf="article as currentArticle">
      <h2 class="text-2xl font-bold mb-2">{{ currentArticle.title }}</h2>
      <p class="text-gray-600 mb-2">Publié le {{ currentArticle.publicationDate }}</p>
      <p class="text-gray-800">{{ currentArticle.content }}</p>
    </div>
  </div>

  <div class="mt-2">
<!--    <button-->
<!--      class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"-->
<!--      (click)="likeArticle()"-->
<!--    >-->
<!--      Liker-->
<!--    </button>-->
    <span class="ml-2">Likes : {{ likes.length }}</span>
  </div>

  <!-- Affichage des commentaires -->
  <div class="bg-white p-4 rounded-md shadow-md mb-6">
    <h3 class="text-xl font-semibold mb-4">Commentaires</h3>
    <ul>
      <li
        *ngFor="let comment of comments"
        class="mb-2 p-2 border-b border-gray-300"
      >
        <span class="font-medium">
          <ng-container *ngIf="isAuthorObject(comment.author); else stringAuthor">
            {{ comment.author?.name }}
          </ng-container>
          <ng-template #stringAuthor>
            {{ comment.author }}
          </ng-template>
          :
        </span>
        <span>{{ comment.content }}</span>
      </li>
    </ul>
  </div>

  <!-- Formulaire d'ajout de commentaire -->
  <div class="bg-white p-4 rounded-md shadow-md mb-6">
    <h4 class="text-lg font-semibold mb-2">Ajouter un commentaire</h4>
    <form [formGroup]="commentForm" (ngSubmit)="onSubmitComment()">
      <div class="mb-2">
        <label for="content" class="block font-medium mb-1">Commentaire</label>
        <textarea
          id="content"
          rows="3"
          formControlName="content"
          class="border border-gray-300 rounded w-full p-2"
        ></textarea>
        <div
          class="text-red-500 text-sm"
          *ngIf="commentForm.get('content')?.invalid && commentForm.get('content')?.touched"
        >
          Le commentaire doit comporter au moins 3 caractères.
        </div>
      </div>

      <button
        type="submit"
        [disabled]="commentForm.invalid"
        class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
      >
        Commenter
      </button>
    </form>
  </div>

</div>
